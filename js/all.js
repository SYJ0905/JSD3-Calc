"use strict";var button=document.querySelectorAll(".calc-button"),calcProcess=document.querySelector(".calc-machine_header-process"),calcResult=document.querySelector(".calc-machine_header-result"),tempNumber="",tempProcess="",lastOpeartor=!0,haveOutcome=!1;function calcCheck(e){e.preventDefault(),e.target.classList.contains("number")?calcNumber(e):e.target.classList.contains("operation")?calcOperation(e):getResult(e)}function calcNumber(e){var t=e.target.textContent;switch(haveOutcome&&allClear(),lastOpeartor&&(tempNumber=""),t){case"0":case"00":calcNumberZero(t);break;case".":tempNumber.includes(".")?(tempNumber+="",tempProcess+=""):lastOpeartor?(tempProcess+="0.",tempNumber="0."):(tempProcess+=".",tempNumber+=".");break;default:"0"===calcResult.innerHTML?(tempNumber=t,tempProcess.endsWith("0")?tempProcess=tempProcess.slice(0,-1)+t:tempProcess+=t):(tempNumber+=t,tempProcess+=t)}calcResult.innerHTML=toCurrency(tempNumber),calcProcess.innerHTML=toCurrency(tempProcess),lastOpeartor=!1}function calcNumberZero(e){return lastOpeartor||"0"===calcResult.innerHTML?(tempNumber="0",tempProcess.endsWith("0")?tempProcess+="":tempProcess+="0"):(tempNumber+=e,tempProcess+=e),[tempNumber,tempProcess]}function calcOperation(e){e.target.classList.contains("allClear")?allClear():e.target.classList.contains("back")?calcBack():addOperator(e)}function allClear(){tempProcess=tempNumber="",calcResult.innerHTML=0,calcProcess.innerHTML=tempProcess,haveOutcome=!(lastOpeartor=!0)}function calcBack(){haveOutcome&&(calcResult.innerHTML=0,haveOutcome=!1),tempProcess.endsWith(" ")?(tempProcess=tempProcess.slice(0,-3),lastOpeartor=!1):(tempProcess=tempProcess.slice(0,-1),tempNumber=tempNumber.slice(0,-1)),calcProcess.innerHTML=toCurrency(tempProcess),tempProcess.endsWith(" ")&&(lastOpeartor=!0),0===tempNumber.length?calcResult.innerHTML=0:calcResult.innerHTML=toCurrency(tempNumber)}function addOperator(e){var t=e.target.textContent;lastOpeartor||(tempProcess.endsWith(".")&&(tempProcess=tempProcess.slice(0,-1)),tempProcess+=t,calcProcess.innerHTML=tempProcess,haveOutcome=!(lastOpeartor=!0))}function getResult(){if(!lastOpeartor&&!haveOutcome){for(var e=tempProcess.replace(/×/g,"*").replace(/÷/g,"/").replace(/−/g,"-").split(" "),t=0;t<e.length;t+=2){var c=0;if(e.includes("*")||e.includes("/"))switch(e[t+1]){case"*":c=calcProcessSequence(e[t],e[t+2],"*"),e.splice(t,3,c),t-=2;break;case"/":c=calcProcessSequence(e[t],e[t+2],"/"),e.splice(t,3,c),t-=2}else switch(e[(t=0)+1]){case"+":c=calcProcessSequence(e[t],e[t+2],"+"),e.splice(t,3,c),t-=2;break;case"-":c=calcProcessSequence(e[t],e[t+2],"-"),e.splice(t,3,c),t-=2}}var r=e.toString();Number.isNaN(r)||"Infinity"===r||"-Infinity"===r?(calcResult.innerHTML=0,calcProcess.innerHTML="error"):(calcResult.innerHTML=toCurrency(r),calcProcess.innerHTML+=" = "),haveOutcome=!0}}function calcProcessSequence(e,t,c){var r=e,s=t,a=0,n=0,o=0,l=0,i=0;switch(a=r.toString().includes(".")?r.toString().split(".")[1].length:0,n=s.toString().includes(".")?s.toString().split(".")[1].length:0,c){case"+":o=Math.pow(10,Math.max(a,n)),i=Math.round(r*o+s*o)/o;break;case"-":o=Math.pow(10,Math.max(a,n)),l=n<=a?a:n,i=(Math.round(r*o-s*o)/o).toFixed(l);break;case"*":i=(r=r.toString().replace(".",""))*(s=s.toString().replace(".",""))/Math.pow(10,a+n);break;case"/":i=(r=r.toString().replace(".",""))/(s=s.toString().replace(".",""))*Math.pow(10,n-a)}return i}function toCurrency(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}button.forEach(function(e){e.addEventListener("click",calcCheck,!1)});
//# sourceMappingURL=all.js.map
